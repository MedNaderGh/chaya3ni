{"version":3,"sources":["webpack:///./src/app/pages/recherche/recherche.module.ts","webpack:///./src/app/pages/recherche/recherche.page.html","webpack:///./src/app/pages/recherche/recherche.page.scss","webpack:///./src/app/pages/recherche/recherche.page.ts"],"names":[],"mappings":"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","file":"pages-recherche-recherche-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule,ActivatedRoute ,Router} from '@angular/router';\nimport { NativeGeocoder} from '@ionic-native/native-geocoder/ngx'\nimport { IonicModule } from '@ionic/angular';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { RecherchePage } from './recherche.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RecherchePage\n  }\n];\n\n@NgModule({\n  providers: [\n    Geolocation,\n    NativeGeocoder\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RecherchePage]\n})\nexport class RecherchePageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-back-button></ion-back-button>\\n      </ion-buttons>\\n      <ion-title>Resultat de recherche</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n<ion-content padding>\\n    <ion-list>\\n        <ion-item-sliding *ngFor=\\\"let promotion of promotion\\\">\\n            <ion-item  *ngIf=\\\"((dist(promotion.Longitude,promotion.Latitude) < distance || distance === 0)&& (promotion.name.includes(mot)||mot === '' )&& (promotion.categorie === categorie|| categorie === '')&& (promotion.partenaire === partenaire|| partenaire === '')&&(promotion.reduction < reduction || reduction === 0)); else seter()\\\">\\n            <ion-card>\\n                <!--<div style=\\\"text-align: right;\\\" *ngIf=!isfav(promotion._id,userDetails._id)>\\n              <ion-icon  (click)=\\\"test(promotion._id,userDetails._id)\\\" name=\\\"heart-empty\\\" style=\\\"color:red;\\\"slot=\\\"end\\\"></ion-icon></div>\\n              <div style=\\\"text-align: right;\\\" *ngIf=isfav(promotion._id,userDetails._id)>\\n              <ion-icon  (click)=\\\"del(promotion._id,userDetails._id)\\\" name=\\\"heart\\\" style=\\\"color:red;\\\"slot=\\\"end\\\"></ion-icon></div>-->\\n                <img src=\\\"{{promotion.img}}\\\"/>\\n                <strong>{{dist(promotion.Longitude,promotion.Latitude)}} Km</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\n              \\n                <ion-card-header>{{promotion.name}}</ion-card-header>\\n                <ion-label><strong><span style=\\\"text-decoration: line-through; font-size: 22px;\\n                  font-weight: 700;\\n                  text-transform: uppercase;\\n                  display: inline-block;\\\">{{promotion.prixas}}<sup>DT</sup> </span>    <span style=\\\"color: #d00ff7;font-size: 22px;\\n                  font-weight: 700;\\n                  text-transform: uppercase;\\n                  display: inline-block;\\\">&nbsp;&nbsp;&nbsp;{{promotion.prixas - (promotion.prixas/ 100)*promotion.reduction }}   <sup>DT</sup></span><span class=\\\"blink_me\\\">&nbsp;&nbsp;{{promotion.reduction}}% </span></strong></ion-label>\\n                  <!--{{partenaire.siteweb}}*/-->\\n                  <ion-button  color=\\\"secondary\\\" (click)=\\\"onOrderDelete(promotion._id)\\\">\\n                      <ion-icon name=\\\"eye\\\" slot=\\\"start\\\"></ion-icon>\\n                      <ion-label>Plus de detail</ion-label>\\n                    </ion-button>\\n                    \\n            </ion-card>\\n          </ion-item>\\n        </ion-item-sliding>\\n      </ion-list>\\n      <div *ngIf=\\\"error\\\"><strong>Aucune promotion trouv√©e</strong></div> \\n</ion-content>\\n\"","module.exports = \":host ion-content {\\n  --background: var(--ion-color-light); }\\n\\n:host ion-item {\\n  border-radius: 0;\\n  border-bottom: 1px dotted var(--ion-color-medium); }\\n\\n:host ion-card {\\n  display: flex;\\n  flex-direction: column;\\n  width: 100% !important;\\n  margin: 0 !important; }\\n\\n:host ion-card.no-radius {\\n    border-radius: 0; }\\n\\n.blink_me {\\n  -webkit-animation: blinker 1s linear infinite;\\n          animation: blinker 1s linear infinite;\\n  color: #ff7c02;\\n  font-size: 28px;\\n  font-weight: 700;\\n  text-transform: uppercase;\\n  display: inline-block; }\\n\\n@-webkit-keyframes blinker {\\n  50% {\\n    opacity: 0; } }\\n\\n@keyframes blinker {\\n  50% {\\n    opacity: 0; } }\\n\\nion-icon {\\n  font-size: 30px;\\n  color: #8cc8fa; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVjaGVyY2hlL0U6XFxkZWFsdG4vc3JjXFxhcHBcXHBhZ2VzXFxyZWNoZXJjaGVcXHJlY2hlcmNoZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFUSxvQ0FBYSxFQUFBOztBQUZyQjtFQU1RLGdCQUFnQjtFQUNoQixpREFBaUQsRUFBQTs7QUFQekQ7RUFjUSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLHNCQUFzQjtFQUN0QixvQkFBb0IsRUFBQTs7QUFqQjVCO0lBWVksZ0JBQWdCLEVBQUE7O0FBUTVCO0VBQ0ksNkNBQXFDO1VBQXJDLHFDQUFxQztFQUNyQyxjQUFjO0VBQ2QsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQix5QkFBeUI7RUFDekIscUJBQXFCLEVBQUE7O0FBR3ZCO0VBQ0U7SUFBTSxVQUFVLEVBQUEsRUFBQTs7QUFEbEI7RUFDRTtJQUFNLFVBQVUsRUFBQSxFQUFBOztBQUVwQjtFQUNBLGVBQWU7RUFDZixjQUNFLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9yZWNoZXJjaGUvcmVjaGVyY2hlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuICAgIGlvbi1jb250ZW50IHtcclxuICAgICAgICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW9uLWl0ZW0ge1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XHJcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcclxuICAgIH1cclxuXHJcbiAgICBpb24tY2FyZCB7XHJcbiAgICAgICAgJi5uby1yYWRpdXMge1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcclxuICAgICAgICBtYXJnaW46IDAgIWltcG9ydGFudDtcclxuICAgIH1cclxufVxyXG4uYmxpbmtfbWUge1xyXG4gICAgYW5pbWF0aW9uOiBibGlua2VyIDFzIGxpbmVhciBpbmZpbml0ZTtcclxuICAgIGNvbG9yOiAjZmY3YzAyO1xyXG4gICAgZm9udC1zaXplOiAyOHB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcclxuICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgfVxyXG4gIFxyXG4gIEBrZXlmcmFtZXMgYmxpbmtlciB7ICBcclxuICAgIDUwJSB7IG9wYWNpdHk6IDA7IH1cclxuICB9XHJcbmlvbi1pY29ue1xyXG5mb250LXNpemU6IDMwcHg7XHJcbmNvbG9yOiAjOGNjOGZhXHJcbiAgfSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { Geolocation } from '@ionic-native/geolocation/ngx';            \nimport { UserService } from 'src/app/pages/user.service';\nimport { NativeGeocoder, NativeGeocoderResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder/ngx';\n@Component({\n  selector: 'app-recherche',\n  templateUrl: './recherche.page.html',\n  styleUrls: ['./recherche.page.scss'],\n})\nexport class RecherchePage implements OnInit {\n  mot: any;\n  reduction: Number=0;\n  partenaire: any;\n  categorie: any;\n  distance: Number=0;\n  promotion: any;\n  lng: any;\n  lat: any;\n  error:boolean=false;\n  c: any=0;\n  constructor( private router: Router,private geolocation: Geolocation,\n    private route: ActivatedRoute,public http: HttpClient,private user: UserService) {\n      this.mot = this.route.snapshot.queryParams['mot'];\n      if(!this.mot) this.mot='';\n      this.distance = this.route.snapshot.queryParams['distance'];\n      if(!this.distance) this.distance=0;\n      this.categorie = this.route.snapshot.queryParams['categorie'];\n      if(!this.categorie) this.categorie='';\n      this.partenaire = this.route.snapshot.queryParams['partenaire'];\n      if(!this.partenaire) this.partenaire='';\n      this.reduction = this.route.snapshot.queryParams['reduction'];\n      if(!this.reduction) this.reduction=0;\n      console.log(this.mot,this.distance,this.categorie,this.partenaire,this.reduction);\n     }\n\n  ngOnInit() {\n    let self=this; \n    this.geolocation.getCurrentPosition({  maximumAge: 300000,timeout: 30000, enableHighAccuracy: true }).then((resp) => {\n      self.lat= resp.coords.latitude;\n      self.lng= resp.coords.longitude;\n      console.log(self.lat);\n      console.log(self.lng);\n      }).catch((error) => {\n      console.log('Error getting location', error);\n      })\n    this.http.get(`${this.user.uri}/getprom`).subscribe(data => {\n      this.promotion = data;\n      console.log(this.promotion);\n    }, err => {\n      if(err.status === 401) {\n        console.log(\"erreur\");\n      }\n    });\n    \n  }\n  dist(ln,la){\n    ln=parseFloat(ln);\n    la=parseFloat(la);\n    let p = 0.017453292519943295;\n    let c = Math.cos;\n    let a = 0.5 - c((la-this.lat) * p) / 2 + c(this.lat * p) *c((la) * p) * (1 - c(((ln- this.lng) * p))) / 2;\n    let dis = (12742 * Math.asin(Math.sqrt(a)));\n    dis=Math.round(dis);\nreturn dis;\n  }\n  onOrderDelete(proID: any) {\n    this.router.navigate(['/promo'], { queryParams: { page: proID } });\n  }\n  seter(){\n    if (this.error === false) {this.error=true}\n    else{this.error=false}\n  }\n}\n"],"sourceRoot":""}